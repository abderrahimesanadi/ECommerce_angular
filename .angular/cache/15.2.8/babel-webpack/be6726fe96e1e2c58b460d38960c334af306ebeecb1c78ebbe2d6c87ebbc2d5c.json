{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { of } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ProductService {\n  constructor(http) {\n    this.http = http;\n    this.productsUrl = 'http://localhost:8080/api'; // URL to web api\n    this.httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json'\n      })\n    };\n  }\n  /** GET products from the server */\n  getProducts() {\n    return this.http.get(this.productsUrl + \"/products\").pipe(tap(_ => console.log('fetched Productes')), catchError(this.handleError('getProductes', [])));\n  }\n  /** GET cat from the server */\n  getCategories() {\n    return this.http.get(this.productsUrl + \"/categories\").pipe(tap(_ => console.log('fetched categories')), catchError(this.handleError('getcategories', [])));\n  }\n  /** GET Product by id. Will 404 if id not found */\n  getProduct(slug) {\n    const url = `${this.productsUrl}/details/${slug}`;\n    return this.http.get(url).pipe(tap(_ => console.log(`fetched Product id=${slug}`)), catchError(this.handleError(`getProduct id=${slug}`)));\n  }\n  panier() {\n    return this.http.get(this.productsUrl + \"/panier\").pipe(tap(_ => console.log('fetched Productes')), catchError(this.handleError('getProductes', [])));\n  }\n  addToPanier(id) {\n    return this.http.get(this.productsUrl + \"/panier/add/\" + id).pipe(tap(_ => console.log('fetched Productes')), catchError(this.handleError('getProductes', [])));\n  }\n  /**\n   * Handle Http operation that failed.\n   * Let the app continue.\n   *\n   * @param operation - name of the operation that failed\n   * @param result - optional value to return as the observable result\n   */\n  handleError(operation = 'operation', result) {\n    return error => {\n      // TODO: send the error to remote logging infrastructure\n      console.error(error); // log to console instead\n      // TODO: better job of transforming error for user consumption\n      // Let the app keep running by returning an empty result.\n      return of(result);\n    };\n  }\n}\nProductService.ɵfac = function ProductService_Factory(t) {\n  return new (t || ProductService)(i0.ɵɵinject(i1.HttpClient));\n};\nProductService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ProductService,\n  factory: ProductService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAAqBA,WAAW,QAAQ,sBAAsB;AAE9D,SAAqBC,EAAE,QAAQ,MAAM;AACrC,SAASC,UAAU,EAAOC,GAAG,QAAQ,gBAAgB;;;AASrD,OAAM,MAAOC,cAAc;EAQzBC,YACUC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAPN,gBAAW,GAAG,2BAA2B,CAAC,CAAE;IAEpD,gBAAW,GAAG;MACZC,OAAO,EAAE,IAAIP,WAAW,CAAC;QAAE,cAAc,EAAE;MAAkB,CAAE;KAChE;EAIG;EAEJ;EACAQ,WAAW;IACT,OAAO,IAAI,CAACF,IAAI,CAACG,GAAG,CAAY,IAAI,CAACC,WAAW,GAAG,WAAW,CAAC,CAC5DC,IAAI,CACHR,GAAG,CAACS,CAAC,IAAIC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC,CAAC,EAC1CZ,UAAU,CAAC,IAAI,CAACa,WAAW,CAAY,cAAc,EAAE,EAAE,CAAC,CAAC,CAC5D;EACL;EAEA;EACAC,aAAa;IACX,OAAO,IAAI,CAACV,IAAI,CAACG,GAAG,CAAa,IAAI,CAACC,WAAW,GAAG,aAAa,CAAC,CAC/DC,IAAI,CACHR,GAAG,CAACS,CAAC,IAAIC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CAAC,EAC3CZ,UAAU,CAAC,IAAI,CAACa,WAAW,CAAa,eAAe,EAAE,EAAE,CAAC,CAAC,CAC9D;EACL;EAEA;EACAE,UAAU,CAACC,IAAS;IAClB,MAAMC,GAAG,GAAG,GAAG,IAAI,CAACT,WAAW,YAAYQ,IAAI,EAAE;IACjD,OAAO,IAAI,CAACZ,IAAI,CAACG,GAAG,CAAUU,GAAG,CAAC,CAACR,IAAI,CACrCR,GAAG,CAACS,CAAC,IAAIC,OAAO,CAACC,GAAG,CAAC,sBAAsBI,IAAI,EAAE,CAAC,CAAC,EACnDhB,UAAU,CAAC,IAAI,CAACa,WAAW,CAAU,iBAAiBG,IAAI,EAAE,CAAC,CAAC,CAC/D;EACH;EAEAE,MAAM;IACJ,OAAO,IAAI,CAACd,IAAI,CAACG,GAAG,CAAY,IAAI,CAACC,WAAW,GAAG,SAAS,CAAC,CAC1DC,IAAI,CACHR,GAAG,CAACS,CAAC,IAAIC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC,CAAC,EAC1CZ,UAAU,CAAC,IAAI,CAACa,WAAW,CAAY,cAAc,EAAE,EAAE,CAAC,CAAC,CAC5D;EACL;EAEAM,WAAW,CAACC,EAAU;IACpB,OAAO,IAAI,CAAChB,IAAI,CAACG,GAAG,CAAY,IAAI,CAACC,WAAW,GAAG,cAAc,GAAGY,EAAE,CAAC,CACpEX,IAAI,CACHR,GAAG,CAACS,CAAC,IAAIC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC,CAAC,EAC1CZ,UAAU,CAAC,IAAI,CAACa,WAAW,CAAY,cAAc,EAAE,EAAE,CAAC,CAAC,CAC5D;EACL;EACA;;;;;;;EAOQA,WAAW,CAAIQ,SAAS,GAAG,WAAW,EAAEC,MAAU;IACxD,OAAQC,KAAU,IAAmB;MAEnC;MACAZ,OAAO,CAACY,KAAK,CAACA,KAAK,CAAC,CAAC,CAAC;MAEtB;MAEA;MACA,OAAOxB,EAAE,CAACuB,MAAW,CAAC;IACxB,CAAC;EACH;;AAxEWpB,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;SAAdA,cAAc;EAAAsB,SAAdtB,cAAc;EAAAuB,YAFb;AAAM","names":["HttpHeaders","of","catchError","tap","ProductService","constructor","http","headers","getProducts","get","productsUrl","pipe","_","console","log","handleError","getCategories","getProduct","slug","url","panier","addToPanier","id","operation","result","error","factory","providedIn"],"sourceRoot":"","sources":["/home/sanadi/app/Boutique-with-angular15/src/app/product.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { Product } from './product';\nimport { Category } from './category';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProductService {\n\n  private productsUrl = 'http://localhost:8080/api';  // URL to web api\n\n  httpOptions = {\n    headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n  };\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  /** GET products from the server */\n  getProducts(): Observable<Product[]> {\n    return this.http.get<Product[]>(this.productsUrl + \"/products\")\n      .pipe(\n        tap(_ => console.log('fetched Productes')),\n        catchError(this.handleError<Product[]>('getProductes', []))\n      );\n  }\n\n  /** GET cat from the server */\n  getCategories(): Observable<Category[]> {\n    return this.http.get<Category[]>(this.productsUrl + \"/categories\")\n      .pipe(\n        tap(_ => console.log('fetched categories')),\n        catchError(this.handleError<Category[]>('getcategories', []))\n      );\n  }\n\n  /** GET Product by id. Will 404 if id not found */\n  getProduct(slug: any): Observable<Product> {\n    const url = `${this.productsUrl}/details/${slug}`;\n    return this.http.get<Product>(url).pipe(\n      tap(_ => console.log(`fetched Product id=${slug}`)),\n      catchError(this.handleError<Product>(`getProduct id=${slug}`))\n    );\n  }\n\n  panier(): Observable<Product[], number> {\n    return this.http.get<Product[]>(this.productsUrl + \"/panier\")\n      .pipe(\n        tap(_ => console.log('fetched Productes')),\n        catchError(this.handleError<Product[]>('getProductes', []))\n      );\n  }\n\n  addToPanier(id: number): Observable<Product[]> {\n    return this.http.get<Product[]>(this.productsUrl + \"/panier/add/\" + id)\n      .pipe(\n        tap(_ => console.log('fetched Productes')),\n        catchError(this.handleError<Product[]>('getProductes', []))\n      );\n  }\n  /**\n   * Handle Http operation that failed.\n   * Let the app continue.\n   *\n   * @param operation - name of the operation that failed\n   * @param result - optional value to return as the observable result\n   */\n  private handleError<T>(operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n\n      // TODO: send the error to remote logging infrastructure\n      console.error(error); // log to console instead\n\n      // TODO: better job of transforming error for user consumption\n\n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}